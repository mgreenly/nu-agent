# frozen_string_literal: true

require "duckdb"
require "fileutils"
require "forwardable"
require "json"
require "open3"
require "optparse"
require "readline"
require "securerandom"

require "anthropic"
require "gemini-ai"
require "openai"

module Nu
  module Agent
    class Error < StandardError; end
  end
end

require_relative "agent/api_key"
require_relative "agent/clients/anthropic"
require_relative "agent/clients/google"
require_relative "agent/clients/openai"
require_relative "agent/clients/openai_embeddings"
require_relative "agent/clients/xai"
require_relative "agent/client_factory"
require_relative "agent/spinner"
require_relative "agent/spinner_state"
require_relative "agent/console_io"
require_relative "agent/spell_checker"
require_relative "agent/pausable_task"
require_relative "agent/conversation_summarizer"
require_relative "agent/exchange_summarizer"
require_relative "agent/embedding_pipeline"
require_relative "agent/tool_call_orchestrator"
require_relative "agent/chat_loop_orchestrator"
require_relative "agent/input_processor"
require_relative "agent/help_text_builder"
require_relative "agent/session_info"
require_relative "agent/model_display_formatter"
require_relative "agent/configuration_loader"
require_relative "agent/tools_display_formatter"
require_relative "agent/database_fix_runner"
require_relative "agent/exchange_migration_runner"
require_relative "agent/commands/base_command"
require_relative "agent/commands/command_registry"
require_relative "agent/commands/help_command"
require_relative "agent/commands/tools_command"
require_relative "agent/commands/info_command"
require_relative "agent/commands/models_command"
require_relative "agent/commands/fix_command"
require_relative "agent/commands/migrate_exchanges_command"
require_relative "agent/commands/exit_command"
require_relative "agent/commands/clear_command"
require_relative "agent/commands/debug_command"
require_relative "agent/commands/verbosity_command"
require_relative "agent/commands/redaction_command"
require_relative "agent/commands/summarizer_command"
require_relative "agent/commands/spellcheck_command"
require_relative "agent/commands/reset_command"
require_relative "agent/commands/model_command"
require_relative "agent/commands/embeddings_command"
require_relative "agent/commands/rag_command"
require_relative "agent/application"
require_relative "agent/background_worker_manager"
require_relative "agent/session_statistics"
require_relative "agent/formatter"
require_relative "agent/document_builder"
require_relative "agent/schema_manager"
require_relative "agent/migration_manager"
require_relative "agent/embedding_store"

# RAG retrieval processors
require_relative "agent/rag/rag_processor"
require_relative "agent/rag/rag_context"
require_relative "agent/rag/query_embedding_processor"
require_relative "agent/rag/conversation_search_processor"
require_relative "agent/rag/exchange_search_processor"
require_relative "agent/rag/context_formatter_processor"
require_relative "agent/rag/rag_retriever"
require_relative "agent/config_store"
require_relative "agent/worker_counter"
require_relative "agent/worker_token"
require_relative "agent/message_repository"
require_relative "agent/conversation_repository"
require_relative "agent/exchange_repository"
require_relative "agent/exchange_migrator"
require_relative "agent/history"
require_relative "agent/options"
require_relative "agent/tools/agent_summarizer"
require_relative "agent/tools/database_message"
require_relative "agent/tools/database_query"
require_relative "agent/tools/database_schema"
require_relative "agent/tools/database_tables"
require_relative "agent/tools/dir_create"
require_relative "agent/tools/dir_delete"
require_relative "agent/tools/dir_list"
require_relative "agent/tools/dir_tree"
require_relative "agent/tools/execute_bash"
require_relative "agent/tools/execute_python"
require_relative "agent/tools/file_copy"
require_relative "agent/tools/file_delete"
require_relative "agent/tools/file_edit"
require_relative "agent/tools/file_glob"
require_relative "agent/tools/file_grep"
require_relative "agent/tools/file_move"
require_relative "agent/tools/file_read"
require_relative "agent/tools/file_stat"
require_relative "agent/tools/file_tree"
require_relative "agent/tools/file_write"
require_relative "agent/tools/search_internet"
require_relative "agent/tool_registry"
require_relative "agent/version"
